{
  "active": false,
  "connections": {
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Obtener ID de categoría",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtener ID de categoría": {
      "main": [
        [
          {
            "node": "Obtener ID de fuente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtener ID de fuente": {
      "main": [
        [
          {
            "node": "Insertar transacción",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-07-29T21:10:14.835Z",
  "id": "weeCmqNEWWuk43WW",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "register_transaction",
  "nodes": [
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "id_usuario"
            },
            {
              "name": "tipo"
            },
            {
              "name": "monto",
              "type": "number"
            },
            {
              "name": "descripcion"
            },
            {
              "name": "categoria"
            },
            {
              "name": "moneda"
            },
            {
              "name": "fecha_transaccion"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        0,
        0
      ],
      "id": "706c98eb-d67a-4626-8282-90659c141926",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT id FROM fuentes_registro WHERE nombre = 'WhatsApp' LIMIT 1;\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        416,
        0
      ],
      "id": "40d49221-83f9-4734-a1b2-e1f8161db64d",
      "name": "Obtener ID de fuente",
      "credentials": {
        "postgres": {
          "id": "gFhB2sfDoFHEQ7Pn",
          "name": "pgvector n8n_scrapper"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT id FROM categorias\nWHERE LOWER(nombre) = LOWER($1)\nAND tipo = INITCAP($2)\nLIMIT 1\n",
        "options": {
          "queryReplacement": "categoria, typo"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        208,
        0
      ],
      "id": "6af5f7ba-91dd-4e2c-ab82-6a6b804624d2",
      "name": "Obtener ID de categoría",
      "credentials": {
        "postgres": {
          "id": "gFhB2sfDoFHEQ7Pn",
          "name": "pgvector n8n_scrapper"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO transacciones (\n  id_usuario,\n  descripcion,\n  monto,\n  moneda,\n  tipo,\n  fecha_transaccion,\n  id_categoria,\n  id_fuente\n)\nVALUES (\n  $1, $2, $3, $4, $5, $6, $7, $8\n)\nRETURNING id;\n",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        624,
        0
      ],
      "id": "26b192b1-d32d-4bd2-8d37-31f14d879168",
      "name": "Insertar transacción",
      "credentials": {
        "postgres": {
          "id": "gFhB2sfDoFHEQ7Pn",
          "name": "pgvector n8n_scrapper"
        }
      }
    }
  ],
  "pinData": {},
  "repo_name": "flujos_n8n",
  "repo_owner": "whitelabel-ai",
  "repo_path": "Automation/",
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-07-29T22:22:53.259Z",
  "versionId": "5ab1188c-8e53-4e44-9868-6f5b9b2a2b09"
}